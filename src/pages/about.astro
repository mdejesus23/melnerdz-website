---
import { getEntry, render } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import { ISPARTOF } from '@/data/constant';
import MainLayout from '@/layouts/MainLayout.astro';
import Prose from '@/components/Prose.astro';
import { Image } from 'astro:assets';
import profilePicture from '@/images/mdj.png';

const entry = await getEntry('personal', 'about');
const canonical = Astro.url.href;

if (!entry) {
  return Astro.redirect('/404');
}

const typedEntry: CollectionEntry<'personal'> = entry;
const { Content } = await render(typedEntry);

const title = `About Me`;
const description = `Here's the summary of my expertise and experience as a Fullstack Developer`;
---

<MainLayout
  title={title}
  structuredData={{
    '@context': 'https://schema.org',
    '@type': 'WebPage',
    '@id': canonical,
    url: canonical,
    name: `About Melnard`,
    description: description,
    isPartOf: ISPARTOF,
    inLanguage: 'en-US',
  }}
  meta={description}
>
  <section class="py-10 md:py-20">
    <!-- Hero section -->
    <div class="mb-16 flex flex-col items-center text-center">
      <!-- Profile image -->
      <div class="relative mb-8">
        <div
          class="border-accent/20 absolute -inset-4 animate-pulse-glow rounded-full border"
        >
        </div>
        <figure
          class="border-accent/30 relative h-40 w-40 overflow-hidden rounded-full border-2 bg-bg-secondary shadow-glow md:h-52 md:w-52"
        >
          <Image
            src={profilePicture}
            alt="Melnard De Jesus"
            class="h-full w-full object-cover"
          />
        </figure>
      </div>

      <!-- Title and intro -->
      <span
        class="mb-4 inline-block text-sm font-medium uppercase tracking-widest text-accent"
      >
        About Me
      </span>
      <h1 class="mb-4 font-headfont text-3xl font-bold md:text-5xl">
        Melnard <span class="gradient-text">De Jesus</span>
      </h1>
      <p class="max-w-xl text-lg text-text-muted">
        Full-Stack Web Developer passionate about creating elegant solutions to
        complex problems
      </p>

      <!-- CTA -->
      <div class="mt-8">
        <a
          href="/mdj-oct-2025.pdf"
          target="_blank"
          class="group relative inline-flex items-center gap-2 overflow-hidden rounded-full bg-accent px-6 py-3 font-medium text-bg-primary transition-all duration-300 hover:shadow-glow"
        >
          <span class="relative z-10">Download CV</span>
          <svg
            class="relative z-10 h-4 w-4 transition-transform duration-300 group-hover:translate-y-0.5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
            ></path>
          </svg>
          <div
            class="absolute inset-0 -translate-x-full bg-accent-light transition-transform duration-300 group-hover:translate-x-0"
          >
          </div>
        </a>
      </div>
    </div>

    <!-- Divider -->
    <div class="flex items-center gap-4 py-8">
      <div
        class="h-px flex-1 bg-gradient-to-r from-transparent via-border to-transparent"
      >
      </div>
      <span class="bg-accent/50 h-1.5 w-1.5 rounded-full"></span>
      <div
        class="h-px flex-1 bg-gradient-to-r from-transparent via-border to-transparent"
      >
      </div>
    </div>

    <!-- Content -->
    <div class="mx-auto max-w-3xl">
      <Prose>
        <Content />
      </Prose>
    </div>
  </section>
</MainLayout>
