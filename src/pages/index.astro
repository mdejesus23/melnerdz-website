---
import MainLayout from '../layouts/MainLayout.astro';
import Hero from '../components/Hero.astro';
import Projects from '../components/Projects.astro';

const title: string = 'Melnerdz website';
const description: string =
  'A versatile Full-Stack Web Developer with deep expertise in HTML, CSS, JavaScript, and hands-on experience with Node.js, Express.js, React, and Astro.';
---

<MainLayout title={title} description={description}>
  <Hero />
  <Projects />

  <script>
    // Call the Netlify serverless function to log the IP address
    async function test() {
      try {
        const res = await fetch('/netlify/functions/log-ip');
        if (!res) {
          throw new Error('Error on fetching ip address!');
        }

        const data = await res.json();

        console.log('data', data);
      } catch (error) {
        console.log(JSON.stringify(error));
      }
    }

    test();
  </script>
</MainLayout>
