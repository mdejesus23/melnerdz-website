---
const isDev = import.meta.env.DEV;
const emailString = import.meta.env.EMAIL_STRING;
const redirectLink = isDev ? 'http://localhost:4321' : 'https://melnerdz.com';

const autoResponseMessage: string =
  "Thank you for your message! I'll get back to you soon.";
---

<form
  class="space-y-5"
  action=`https://formsubmit.co/${emailString}`
  method="POST"
>
  <!-- Hidden fields -->
  <input
    id="formSubject"
    type="hidden"
    name="_subject"
    value="User Message - Melnerdz Contact Form"
  />
  <input type="hidden" name="_next" value=`${redirectLink}/thanks/` />
  <input type="hidden" name="_autoresponse" value=`${autoResponseMessage}` />

  <!-- Name field -->
  <div>
    <label for="name" class="mb-2 block text-sm font-medium text-white">
      Name <span class="text-accent">*</span>
    </label>
    <input
      required
      type="text"
      id="name"
      name="name"
      class="bg-bg-primary/60 focus:border-accent/50 focus:ring-accent/20 w-full rounded-xl border border-border px-4 py-3 text-white placeholder-text-muted transition-all duration-300 focus:outline-none focus:ring-2"
      placeholder="Your name"
    />
  </div>

  <!-- Email field -->
  <div>
    <label for="email" class="mb-2 block text-sm font-medium text-white">
      Email <span class="text-accent">*</span>
    </label>
    <input
      required
      type="email"
      id="email"
      name="email"
      class="bg-bg-primary/60 focus:border-accent/50 focus:ring-accent/20 w-full rounded-xl border border-border px-4 py-3 text-white placeholder-text-muted transition-all duration-300 focus:outline-none focus:ring-2"
      placeholder="your@email.com"
    />
  </div>

  <!-- Subject field (optional) -->
  <div>
    <label for="subject" class="mb-2 block text-sm font-medium text-white">
      Subject
    </label>
    <input
      type="text"
      id="subject"
      name="subject"
      class="bg-bg-primary/60 focus:border-accent/50 focus:ring-accent/20 w-full rounded-xl border border-border px-4 py-3 text-white placeholder-text-muted transition-all duration-300 focus:outline-none focus:ring-2"
      placeholder="What's this about?"
    />
  </div>

  <!-- Message field -->
  <div>
    <label for="message" class="mb-2 block text-sm font-medium text-white">
      Message <span class="text-accent">*</span>
    </label>
    <textarea
      required
      id="message"
      name="message"
      rows="5"
      class="bg-bg-primary/60 focus:border-accent/50 focus:ring-accent/20 w-full resize-none rounded-xl border border-border px-4 py-3 text-white placeholder-text-muted transition-all duration-300 focus:outline-none focus:ring-2"
      placeholder="Tell me about your project or inquiry..."></textarea>
  </div>

  <!-- Submit button -->
  <button
    type="submit"
    class="group relative w-full overflow-hidden rounded-xl bg-accent py-3.5 font-medium text-bg-primary transition-all duration-300 hover:shadow-glow"
  >
    <span class="relative z-10 flex items-center justify-center gap-2">
      Send Message
      <svg
        class="h-4 w-4 transition-transform group-hover:translate-x-1"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
      </svg>
    </span>
    <div
      class="absolute inset-0 -translate-x-full bg-accent-light transition-transform duration-300 group-hover:translate-x-0"
    >
    </div>
  </button>

  <p class="text-center text-xs text-text-muted">
    I typically respond within 24-48 hours.
  </p>
</form>
